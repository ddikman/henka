# henka design

## Data storage
There are two bits of data used by henka, the settings and the events generated by the service.

The settings are simply stored as a yaml file which is read on service startup, the events however is a bit more complicated.

Since the service might run for long and archiving details about the change might actually be quite interesting I decided on going
with event sourcing for persisting the data. It would've been overkill to use something like EventStore so I created a very simple class
to handle it within the project, the `eventStore.js`.

## eventStore.js
The class simply timestamps and creates id numbers for events generated and stores these in a file. The target file is not a pure json file
since it would require using an array to keep the objects in, instead it is considered to be a json array missing the [] brackets.
Each event is prepended to an existing file with a , to mark it as a new object. When the file is first created an initial event is written
without this starting comma since it's the first one in the file.

> I consider adding an index to this file as well to allow reading contents from a given point in time but for now everything will be held in memory.
